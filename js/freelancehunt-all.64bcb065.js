"use strict";var Utils={warn:function(t){var e=new PNotify({text:t,type:"notice",shadow:!1,styling:"fontawesome",delay:2500});e.get().hover(function(){e.remove()})},success:function(t){new PNotify({text:t,type:"success",shadow:!1,styling:"fontawesome",delay:2500,after_init:function(t){t.attention("pulse")}})},error:function(t){var e=new PNotify({text:t,type:"error",shadow:!1,styling:"fontawesome",delay:2500});e.get().click(function(){e.remove()})},loadLocationData:function(t){var e,i=$('select[name="city_id"], select[name="city"]'),a=$('select[name="country_id"], select[name="country"]');i.prop("disabled",!0).after('<i class="fa fa-spinner fa-spin fade in" id="city_ajax_indicator"></i>');var n=$("#city_ajax_indicator");$.getJSON("/static/javascript/generated/location.data."+Freelancehunt.config.lang+".js",function(a){e=a,n.removeClass("in"),t||i.prop("disabled",!1).trigger("change")}),a.change(function(){n.addClass("in");var t='<option value="">Не указан</option>',a=e[0][this.value];for(var o in a)t+='<option value="'+o+'">'+a[o]+"</option>";i.html(t),n.removeClass("in"),i.trigger("change")})},incrElement:function(t){var e=t.css("fontSize"),i="";return t.text()&&(i=parseInt(t.text())+1),t.animate({fontSize:"150%"},400).text(i).animate({fontSize:e},"slow")},decrElement:function(t){var e=t.css("fontSize");return t.animate({fontSize:"150%"},400).text(parseInt(t.text())-1).animate({fontSize:e},"slow")},numeral:function(t,e){var i=[2,0,1,1,1,2];return t+" "+e[t%100>4&&t%100<20?2:i[t%10<5?t%10:5]]},ajaxButtonCallback:function(t,e){$(document).on("click",t,function(t){t.preventDefault();var i=$(this),a=i.html();i.addClass("disabled"),"A"==this.tagName?i.html('<i class="fa fa-spinner fa-spin"></i>'):i.html('<i class="fa fa-spinner fa-spin"></i> Выполняется...'),$.ajax({url:this.href,cache:!1,context:this,success:function(t){t.success?("multiple"!==i.data("async-request")?i.unbind("click").click(function(t){return t.preventDefault(),!1}):i.removeClass("disabled"),t.message&&Utils.success(t.message)):t.warning?Utils.warn(t.message):Utils.error("Системная ошибка"),i.html(a),t.success&&void 0!==e&&e.call(i)},error:function(t,e,n){i.html(a),Utils.error(n)}})})},markRelativeLinks:function(){$("a").filter(function(){var t=$(this);return this.hostname&&this.hostname!==location.hostname&&!(t.children(":first").get(0)&&"img"==t.children(":first").get(0).tagName.toLowerCase())}).each(function(){var t=$(this);t.hasClass("no-external-marker")||-1!=t.attr("href").indexOf("freelancehunt.com")||t.parents(".fr-box").length||t.attr("target","_blank").attr("rel","nofollow noopener")})},linkify:function(t){return t||(t=$("body")),t.find(".linkify-marker").linkify({linkClass:"no-external-marker",linkAttributes:{rel:"nofollow noopener"}}).each(function(){this.innerHTML=this.innerHTML.replace(/(^|\s)@([\w-_]+)/g,'$1@<a href="https://freelancehunt.com/profile/show/$2.html">$2</a>')})},initTooltips:function(){$("a").filter("[title]:not(.marker-no-tooltip)").tooltip({trigger:"hover",container:"body",placement:"auto"}).on("show.bs.tooltip",function(){$(".tooltip").not(this).hide()}),$(".with-tooltip").tooltip({container:"body",placement:"auto"}),$('input[title][type="text"], textarea[title], input[title][type="password"]').tooltip({trigger:"focus",placement:"right",container:"body"}),$('input[title][type="checkbox"]').tooltip({trigger:"focus",placement:"left",container:"body"})},pwstrength:function(t){var e=function(){var t,e;return e=document.createElement("script"),e.src="/static/vendor/zxcvbn/dist/zxcvbn.js",e.type="text/javascript",e.async=!0,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)};null!=window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1);var i={0:"<span class='text-red'>очень слабая, не используйте это пароль</span>",1:"<span class='text-orange'>слабая, ваш пароль можно подобрать</span>",2:"<span class='text-yellow'>средняя</span>",3:"<span class='text-turquoise'>высокая</span>",4:"<span class='text-green'>очень высокая</span>"};$(t).on("input",function(){if("undefined"!=typeof zxcvbn){var t=$(this).val(),e=zxcvbn(t);""!==t?$(this).next(".help-block").html("Сложность пароля: "+i[e.score]):$(this).next(".help-block").html("")}})},froala:function(t,e){var i={uk:"Почніть набирати повідомлення...",en:"Start typing your message..."},a={inlineMode:!1,key:{"freelancehunt.com":"wvcwvxtxtB-16qouhC2A-7pm==","freelancehunt.work":"KlyihbnC-8rwB-33aD-17bE2ovhp==","fhv2.local":"uhgfA6B1C-9H-9vwB-22=="}[window.location.hostname],theme:"gray",zIndex:5,heightMin:120,linkAlwaysBlank:!0,linkAutoPrefix:"http://",language:Freelancehunt.config.lang||"ru",imageMaxSize:3145728,imageDefaultDisplay:"block",imageDefaultAlign:"left",imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],charCounterCount:!1,placeholderText:i[Freelancehunt.config.lang]||"Начните набирать собщение...",imageUploadURL:"/upload/doupload",toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","|","emoticons","|","paragraphFormat","align","formatOL","formatUL","quote","insertHR","|","insertLink","insertImage","insertVideo","insertTable"],toolbarButtonsMD:["fullscreen","bold","italic","underline","paragraphFormat","align","formatOL","formatUL","quote","insertHR","insertLink","insertImage","insertVideo","insertTable","undo","redo"],toolbarButtonsXS:["bold","italic","insertImage"],pasteAllowedStyleProps:["background","width","text-align","vertical-align"],pasteDeniedAttrs:["class","id","style"],aviaryKey:"ae96e0af8254433ebeaf7bb70c34cc43",emoticonsUseImage:!1};$.extend(a,e);var n={at:"@",delay:300,searchKey:"id",callbacks:{matcher:function(t,e,i,a){var n,o,s,r,l;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(t="(?:^|\\s)"+t),n=decodeURI("%C3%80"),o=decodeURI("%C3%BF"),l=a?" ":"",r=new RegExp(t+"([А-Яа-яA-Za-z"+n+"-"+o+"0-9_"+l+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),(s=r.exec(e))?s[2]||s[1]:null},remoteFilter:function(t,e){$.getJSON("/profile/doquicksearch",{q:t},function(t){e(t)})}},displayTpl:'<li><img src="${avatar}" width="16" height="16" style="vertical-align: text-bottom"> ${id} <small>${name}</small></li>',insertTpl:"${atwho-at}${id}",limit:10},o=$(t);$.each(o,function(){$(this).on("froalaEditor.initialized",function(t,e){e.$el.atwho(n),e.events.on("keydown",function(t){if(t.which===$.FroalaEditor.KEYCODE.ENTER&&e.$el.atwho("isSelecting"))return!1},!0)}).on("froalaEditor.image.inserted",function(t,e,i,a){if(i.get(0).naturalWidth>750)return i.wrap('<a target="_blank" style="display: block" href="'+i.get(0).src+'"></a>')}).froalaEditor(a)});var s=$(".fr-element").parents("form");return s.submit(function(t){$(this).data("is-submitting",!0)}),$(document).ajaxComplete(function(){s.data("is-submitting",!1)}),$(".fr-element").keydown(function(t){if(13==t.keyCode&&t.ctrlKey||13==t.keyCode&&t.metaKey)return s.find("textarea").froalaEditor("cursor.backspace"),s.data("is-submitting")?console.log("Message send in progress, preventing spamming"):s.submit(),t.preventDefault(),!1}),o},initAjaxPopovers:function(t){$(t).popover({html:!0,title:function(){return $(this).data("title")},trigger:"manual",container:"body",template:'<div style="min-width: 300px" class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content smaller"></div></div>',content:function(){return $(this).data("popover-ajax-content")}}),$(t).on("mouseenter",function(){var e,i=$(this),a=function(){i.data("popover-ajax-content")&&($(t).not(i).popover("hide"),i.tooltip("hide").on("mouseleave",function(){setTimeout(function(){$(".popover:hover").length||i.is(":hover")||i.popover("hide")},200)}),clearTimeout(e),e=setTimeout(function(){i.is(":hover")&&i.popover("show"),$(".popover").on("mouseleave",function(){i.popover("hide")})},50))};void 0===i.data("popover-ajax-content")?$.get(i.data("popover-url"),function(t){i.data("popover-ajax-content",t),a()}):a()}).on("click",function(){$(this).popover("hide")})},playNotification:function(t){var e="/static/audio/"+t;$("body").append('<audio autoplay="autoplay"><source src="'+e+'.mp3" type="audio/mpeg" /><source src="'+e+'.ogg" type="audio/ogg" /><embed hidden="true" autostart="true" loop="false" src="'+e+'.mp3" /></audio>')},voteFromShadowbox:function(){var t=/(\d+)\/[^/]+$/.exec($("#sb-body-inner img").attr("src"));t&&$.ajax({url:"/showcase/dosnippetvote/direction/up/snippet/"+t[1],cache:!1,success:function(t){t.success?Utils.success(t.message):t.warning?Utils.warn(t.message):Utils.error("Системная ошибка")}})},trackSnippetView:function(t){t>0&&$.getJSON("/showcase/dotracksnippetview/snippet/"+t,function(e){if(e.success){var i=$("#snippet-views-"+t);i.length&&Utils.incrElement(i)}})},modalSubmit:function(){$("#fh-modal, #fh-modal-lg").on("show.bs.modal",function(t){var e=$(t.relatedTarget),i=$(this).find(".modal-dialog");e.data("modal-lg")&&i.addClass("modal-lg"),$(this).data("original-html",i.html())}).on("shown.bs.modal",function(){$("#subject").length?$("#subject").focus():$("#message-0").length&&$("#message-0").froalaEditor("events.focus")}).on("loaded.bs.modal",function(t){Ladda.bind(".ladda-button",{timeout:2e4});var e=$(".modal-submit").closest("form");e.submit(function(t){var i,a,n;t.preventDefault(),void 0!==window.FormData?(i=new FormData(this),a=!1,n=!1):(i=$(this).serializeArray(),a=!0,n=!0),$.ajax({url:this.getAttribute("action"),type:"POST",processData:a,contentType:n,data:i,success:function(t,i,a){if(t.failed)return Utils.warn(t.message),void Ladda.stopAll();Utils.success(t.message),t.redirect_url?setTimeout(function(){t.redirect_url.indexOf(window.location.pathname)>-1?window.location.reload():window.location.replace(t.redirect_url)},1e3):e.data("callback")&&new Function(e.data("callback"))(),$("#fh-modal, #fh-modal-lg").modal("hide")},error:function(t,e,i){Utils.warn(i),Ladda.stopAll()}})})}).on("hidden.bs.modal",function(t){$(this).removeData("bs.modal"),$("a").blur().tooltip("hide"),$(this).find(".modal-dialog").removeClass("modal-lg").html($(this).data("original-html"))})},createMap:function(t,e,i){var a,n,o,s=encodeURIComponent(document.URL),r=Freelancehunt.profile.id?"":'<a href="https://freelancehunt.com/profile/register" target="_blank" title="Добавить себя на карту" data-placement="left"><i class="fa fa-2x fa-user-plus"></i></a>';return L.Icon.Default.imagePath="/static/vendor/leaflet/dist/images",e&&i?(n=new L.LatLng(e,i),o=12):(n=new L.LatLng(50.4501,30.5234),o=5),(a=new L.Map("profiles-map",{attributionControl:!1,center:n,zoom:o})).on("locationfound",function(t){Freelancehunt.profile.id&&$.post("/profile/doupdatelocation",{lat:t.latitude,lng:t.longitude},function(t){t.success&&Utils.success("Местоположение обновлено")})}),t?L.easyButton("fa fa-compress",function(){window.location.replace("/freelancers/map")},"Просмотр на странице").addTo(a):L.easyButton("fa fa-expand",function(){window.location.replace("/freelancers/map/fullscreen")},"Просмотр на полном экране").addTo(a),L.control.locate({onLocationError:function(t){Utils.error('Невозможно определить ваше местоположение, возможно, вы <a href="https://support.google.com/maps/answer/152197?hl=ru">запретили доступ</a>.')},strings:{title:"Найти меня на карте",popup:"Вы на расстоянии {distance} {unit} от этой точки",outsideMapBoundsMsg:"Вы находитесь за границей карты"}}).addTo(a),L.control.attribution({position:"bottomright",prefix:t?'<a href="https://freelancehunt.com/freelancers" target="_blank"><img src="/static/images/logo/freelancehunt-'+Freelancehunt.config.lang+'.png" style="margin-bottom: 5px"></a>':'<a href="https://freelancehunt.com/freelancers" style="font-weight: bold">freelancehunt.com</a>'}).addTo(a),L.control.attribution({position:"bottomleft",prefix:'<div style="margin-bottom: 5px">'+r+'&nbsp;&nbsp;<a href="https://twitter.com/intent/tweet?text=%D0%92%D1%81%D0%B5%20%23%D1%84%D1%80%D0%B8%D0%BB%D0%B0%D0%BD%D1%81%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%D0%BA%D0%B0%D1%80%D1%82%D0%B5%20%D0%BC%D0%B8%D1%80%D0%B0&url='+s+'" target="_blank" class="no-external-marker"><i class="fa fa-2x fa-twitter"></i></a>&nbsp;&nbsp;<a href="https://www.facebook.com/sharer/sharer.php?u='+s+'" target="_blank" class="no-external-marker"><i class="fa fa-2x fa-facebook"></i></a>&nbsp;&nbsp;<a href="http://vk.com/share.php?url='+s+'" target="_blank" class="no-external-marker"><i class="fa fa-2x fa-vk"></i></a></div>'}).addTo(a),L.tileLayer("https://{s}.tiles.mapbox.com/v4/freelancehunt.l92fhaf8/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZnJlZWxhbmNlaHVudCIsImEiOiJNOVhzMkVFIn0.dj_OC737RpBLdxsWuwEw1A",{maxZoom:14}).addTo(a),a},phoneInput:function(t){var e=$("[name=phone]");e.intlTelInput({autoPlaceholder:!0,nationalMode:!1,dialCodeDelimiter:"",preferredCountries:["ua","ru","by"],responsiveDropdown:!0,utilsScript:"/static/vendor/intl-tel-input/build/js/utils.js?8.3",defaultCountry:t}),e.blur(function(){$.trim($(this).val())&&($(this).intlTelInput("isValidNumber")?$(this).parents(".form-group").removeClass("has-error"):$(this).parents(".form-group").addClass("has-error"))})},partialRequests:function(){$("[data-partial-url]").click(function(t){t.preventDefault();var e=$(this),i=$('<i class="fa fa-spinner fa-spin" style="margin-left: 4px !important;"></i>').insertAfter($(this));$.get(e.data("partial-url"),function(t){var a=e.data("partial-target");a?$("#"+a).html(t):e.replaceWith(t),i.remove()})})},timeago:function(t){if(t||(t=$("body")),jQuery.timeago)switch(Freelancehunt.config.lang){case"uk":!function(){function t(t,e,i,a){var n=t%10;return 1===n&&(1===t||t>20)?e:n>1&&n<5&&(t>20||t<10)?i:a}jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"через",suffixAgo:"тому",suffixFromNow:null,seconds:"менше хвилини",minute:"хвилина",minutes:function(e){return t(e,"%d хвилина","%d хвилини","%d хвилин")},hour:"година",hours:function(e){return t(e,"%d година","%d години","%d годин")},day:"день",days:function(e){return t(e,"%d день","%d дні","%d днів")},month:"місяць",months:function(e){return t(e,"%d місяць","%d місяці","%d місяців")},year:"рік",years:function(e){return t(e,"%d рік","%d роки","%d років")}}}();break;case"ru":!function(){function t(t,e,i,a){var n=(t%=100)%10;return 1===n&&(1===t||t>20)?e:n>1&&n<5&&(t>20||t<10)?i:a}jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"через",suffixAgo:"назад",suffixFromNow:null,seconds:"меньше минуты",minute:"минуту",minutes:function(e){return t(e,"%d минуту","%d минуты","%d минут")},hour:"час",hours:function(e){return t(e,"%d час","%d часа","%d часов")},day:"день",days:function(e){return t(e,"%d день","%d дня","%d дней")},month:"месяц",months:function(e){return t(e,"%d месяц","%d месяца","%d месяцев")},year:"год",years:function(e){return t(e,"%d год","%d года","%d лет")}}}()}t.find("time.timeago").timeago().tooltip()},select2tags:function(t){t.select2({cache:!0,tags:!0,minimumInputLength:2,maximumSelectionSize:12,tokenSeparators:[","],createTag:function(t){return{id:$.trim(t.term),text:$.trim(t.term)+" (новая метка)"}},ajax:{url:"/profile/dofetchtags",cache:!0,dataType:"json",data:function(t){return{q:t.term}},processResults:function(t,e){return{results:$.map(t,function(t){return{text:t,id:t}})}}}})},wayforpay:function(){$("[data-wayforpay-widget]").click(function(t){t.preventDefault();var e;if($(this).data("project-id"))e="/payment/dofetchwayforpaywidget/project/"+$(this).data("project-id");else{if(!$(this).data("contest-id"))return void Utils.error("Не указано назначение платежа");e="/payment/dofetchwayforpaywidget/contest/"+$(this).data("contest-id")}$(this).data("payway")&&(e=e+"?payway="+$(this).data("payway")),$.when($.getJSON(e),$.getScript("https://secure.wayforpay.com/server/pay-widget.js")).done(function(e){var i=e[2].responseJSON;i.failed?Utils.error(i.message):i.success?(Utils.success(i.message),location.reload()):(t.preventDefault(),(new Wayforpay).run(i,function(t){console.info(t),window.location.replace("/payment/success/invoice/"+i.orderReference)},function(t){console.error(t)},function(t){console.warn(t)}))})})},uploader:function(t,e){var i={autoUpload:!0,text:{defaultResponseError:"Системная ошибка при загрузке файла."},messages:{emptyError:"{file} имеет нулевой размер",tooManyItemsError:"Вы можете приложить к сообщению не более {itemLimit} файлов (приложено {netItems})",typeError:"Запрещенный тип файла {file}, разрешенные расширения: {extensions}"},validation:{itemLimit:10,allowedExtensions:["gif","jpeg","jpg","png","pdf","psd","gz","7z","docx","doc","zip","rar","rtf","odt","ott","ods","sxw","ai","gzip","swf","cdr","mp3","xlsx","xls","txt","pptx","ppt","css","c","h","js","ico","htm","html","csv"]},template:"file-uploader-template-form",showMessage:function(t){Utils.warn(t)}};return e&&$.extend(i,e),t.fineUploader(i).on("error",function(t,e,i,a,n){Utils.warn(i+": "+a)}),t},youtubeEmbed:function(){var t=document.getElementById("youtube-player"),e=t.dataset.videoId;t.onclick=function(){var i=document.createElement("iframe");i.setAttribute("src","//www.youtube.com/embed/"+e+"?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0&modestbranding=0&rel=0&fs=1"),i.setAttribute("frameborder","0"),i.setAttribute("id","youtube-iframe"),i.setAttribute("allowfullscreen","allowfullscreen"),t.innerHTML="",t.appendChild(i),t.style.paddingBottom="56.25%"}},highlightCode:function(){$("pre").length>1&&$LAB.script("/static/vendor/highlightjs/highlight.pack.min.js?9.4").wait(function(){$("pre").each(function(t,e){hljs.highlightBlock(e)})})},isInViewport:function(t){var e=$(window),i={top:e.scrollTop(),left:e.scrollLeft()};i.right=i.left+e.width(),i.bottom=i.top+e.height();var a=t.offset();return a.right=a.left+t.outerWidth(),a.bottom=a.top+t.outerHeight(),!(i.right<a.left||i.left>a.right||i.bottom<a.top||i.top>a.bottom)},registerPushNotifications:function(t){$LAB.script("//cdn.onesignal.com/sdks/OneSignalSDK.js"),window.OneSignal=window.OneSignal||[],window.OneSignal.push(["init",{appId:"9d8b8c3c-35f7-4e2f-8674-e7d5cf9f6d2f",autoRegister:!0,promptOptions:{actionMessage:"желает уведомлять вас о важных событиях:",exampleNotificationTitleDesktop:"This is an example notification",exampleNotificationMessageDesktop:"Notifications will appear on your desktop",exampleNotificationTitleMobile:" Example notification",exampleNotificationMessageMobile:"Notifications will appear on your device",exampleNotificationCaption:"(you can unsubscribe anytime)",acceptButtonText:"Согласен".toUpperCase(),cancelButtonText:"Не интересно".toUpperCase(),showCredit:!1},welcomeNotification:{disable:!1,title:"На связи!",message:"Теперь вы будете получать уведомления от Freelancehunt"},notifyButton:{enable:!1}}]),window.OneSignal.push(["sendTags",{profile_type:Freelancehunt.profile.profileType,country_code_ip:Freelancehunt.profile.ipCountryCode,country_code:Freelancehunt.profile.countryCode,amount_spent:t,has_plus:!!Freelancehunt.profile.hasPlus}]),Utils.syncPushNotificationsStatus()},syncPushNotificationsStatus:function(){window.OneSignal.push(function(){window.OneSignal.isPushNotificationsSupported()&&window.OneSignal.push(["getIdsAvailable",function(t){t.userId&&t.registrationId&&window.OneSignal.isPushNotificationsEnabled(function(e){$.post("/my/dosavepushstatus",{is_push_enabled:e,push_user_id:t.userId,push_registration_id:t.registrationId}),console.log("Push UserID: "+t.userId+"\nPush Registration ID: "+t.registrationId+"\nEnabled: "+e)})}])})},updateQueryString:function(t,e,i){i||(i=window.location.href);var a,n=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(n.test(i))return void 0!==e&&null!==e?i.replace(n,"$1"+t+"="+e+"$2$3"):(a=i.split("#"),i=a[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==a[1]&&null!==a[1]&&(i+="#"+a[1]),i);if(void 0!==e&&null!==e){var o=-1!==i.indexOf("?")?"&":"?";return a=i.split("#"),i=a[0]+o+t+"="+e,void 0!==a[1]&&null!==a[1]&&(i+="#"+a[1]),i}return i},showHints:function(){$("[data-hint]").length>0&&$LAB.script("/static/vendor/intro.js/minified/intro.min.js?2.5").wait(function(){var t=introJs();t.setOption("hintButtonLabel","OK"),t.onhintclick(function(t,e,i){$.post("/profile/doviewfeaturehint",{hint:e.targetElement.dataset.hintId}),mixpanel.track("View hint",{"Hint name":e.targetElement.dataset.hintName})}),setTimeout(function(){t.addHints()},4e3)})},confirmableButtons:function(){$("a[data-confirmable]").click(function(t){$(this).data("confirmed")||(t.preventDefault(),$(this).text("Подтвердить действие").removeClass("btn-default").removeClass("btn-success").addClass("btn-warning"),$(this).data("confirmed",!0))})}};Utils.photoswipe={_galleries:{},parseHash:function(){var t=window.location.hash.substring(1),e={};if(t.length<5)return e;for(var i=t.split("&"),a=0;a<i.length;a++)if(i[a]){var n=i[a].split("=");n.length<2||(e[n[0]]=n[1])}return e.gid&&(e.gid=parseInt(e.gid,10)),e.hasOwnProperty("pid")?(e.pid=parseInt(e.pid,10),e):e},getGalleryItems:function(t){var e=[];return $(".photoswipe[data-gallery-id="+t+"]").each(function(){var i={galleryUID:t,src:$(this).attr("href"),msrc:$(this).find("img:first").attr("src"),thumbnail:$(this).find("img:first")[0],w:$(this).data("width"),h:$(this).data("height"),title:$(this).parents(".snippet-position-container").find(".caption > .linkify-marker").html()||$(this).attr("title"),snippetId:$(this).data("snippet-id"),alreadyViewed:!1};e.push(i)}),e},openPhotoSwipe:function(t,e){var i,a,n=this;a={galleryUID:t,index:e,bgOpacity:.97,preload:[2,2],showHideOpacity:!0,getThumbBoundsFn:function(e){var i=n._galleries[t][e].thumbnail,a=window.pageYOffset||document.documentElement.scrollTop,o=i.getBoundingClientRect();return{x:o.left,y:o.top+a,w:o.width}},shareButtons:[{id:"vkontakte",label:"Поделиться ВКонтакте",url:"http://vkontakte.ru/share.php?url={{url}}"},{id:"facebook",label:"Поделиться на Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Загрузить оригинал",url:"{{raw_image_url}}",download:!0}]},(i=new PhotoSwipe($(".pswp")[0],PhotoSwipeUI_Default,this._galleries[t],a)).listen("afterChange",function(){this.currItem.alreadyViewed||(Utils.trackSnippetView(this.currItem.snippetId),this.currItem.alreadyViewed=!0)}),i.init()},init:function(){var t,e=[],i=this;$(".photoswipe").each(function(){var t=$(this).data("gallery-id");-1==e.indexOf(t)&&e.push(t)});for(var a=0;a<e.length;a++){var n=e[a];this._galleries[n]=this.getGalleryItems(n),$(".photoswipe[data-gallery-id="+n+"]").on("click",function(t){var e,a,n=$(this).data("gallery-id");t.preventDefault(),a=i._galleries[n];for(var o=0;o<a.length;o++)if(a[o].src==$(this).attr("href")&&a[o].galleryUID==n){e=o,console.info("Selected item "+o+" in gallery "+n);break}i.openPhotoSwipe(n,e)})}(t=this.parseHash()).pid>0&&t.gid>0&&(console.info("Showing item "+t.pid+" in gallery "+t.gid+" on load"),this.openPhotoSwipe(t.gid,t.pid))}},function(){for(var t,e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=e.length,a=window.console=window.console||{};i--;)a[t=e[i]]||(a[t]=function(){})}(),this.top.location!==this.location&&(this.top.location=this.location),$(function(){if(Freelancehunt.profile.id||Cookies.get("rfr")||!document.referrer||-1!==document.referrer.indexOf("freelancehunt.com")||Cookies.set("rfr",document.referrer,{expires:7}),!Freelancehunt.profile.id)try{for(var t in localStorage)t.startsWith("bit6_auth")&&localStorage.removeItem(t)}catch(t){}try{Cookies.get("pid3")?window.localStorage.setItem("pid3",Cookies.get("pid3")):window.localStorage.getItem("pid3")&&Cookies.set("pid3",window.localStorage.getItem("pid3"),{expires:365});Cookies.get("bgm3")?window.localStorage.setItem("bgm3",Cookies.get("bgm3")):window.localStorage.getItem("bgm3")&&Cookies.set("bgm3",window.localStorage.getItem("bgm3"),{expires:365})}catch(t){}Utils.initTooltips(),$('<i class="fa fa-chevron-up" id="back-to-top" ></i>').appendTo($("body")),$(window).scroll(function(){var t=$("#back-to-top");0!=$(this).scrollTop()?("undefined"!=typeof ChatraID&&t.css({bottom:"85px",right:"30px"}),t.fadeIn()):t.fadeOut()}).scroll(),$("#back-to-top").click(function(){$("body,html").animate({scrollTop:0},250)}),$("a.disabled").on("click",function(t){t.preventDefault()});var e=0;$("#login-form").submit(function(){var t=$("#login").val(),i=$("#password").val(),a=$("#remember-me:checked").val();if(t.length>0&&i.length>0){if(e>=3)return window.location="/profile/login/forgotpassword/yes/as/"+t,!0;var n=$("#dologin");n.addClass("disabled").html('<i class="fa fa-spinner fa-spin"></i> Вход'),$.ajax({type:"POST",url:"/profile/dologin",data:{login:t,password:i,remember_me:a},success:function(t){t.success?window.location.reload():t.warning?(Utils.warn(t.message),e++,n.removeClass("disabled").html("Вход")):(Utils.error(t.message),n.removeClass("disabled").find("span").html("Вход"))},error:function(t,e,i){Utils.error(i,"error")}})}return!1}).on("click",function(t){t.stopPropagation()}),$("a.track-snippet-view").on("click",function(){Utils.trackSnippetView($(this).data("snippet-id"))}),Utils.markRelativeLinks(),Utils.linkify(),Utils.partialRequests(),Ladda.bind(".ladda-button",{timeout:6e4}),$("a.track-banner-marker").on("click",function(){try{ga("send","event","banner","click",$(this)[0].hostname)}catch(t){}}),$("#my-projects-menu").click(function(){var t=$(this).next("ul");0===t.find("li.active-project").length&&(t.find("i.fa-spinner").removeClass("hidden"),$.get("/my/dofetchactiveprojects",function(e){t.prepend(e),t.find("i.fa-spinner").addClass("hidden")}))}),$("#my-contests-menu").click(function(){var t=$(this).next("ul");0===t.find("li.active-contest").length&&(t.find("i.fa-spinner").removeClass("hidden"),$.get("/my/dofetchactivecontests",function(e){t.prepend(e),t.find("i.fa-spinner").addClass("hidden")}))}),$("#my-profile").click(function(){var t=$(this).next("ul").find("#current-balance");t.data("balance-fetched")||$.get("/my/dofetchbalance",function(e){t.data("balance-fetched",!0),e&&t.html(e)})}),$("#my-feed-menu").click(function(){var t=$(this).next("ul").width($("#top-ushki").width()-1);$.get("/my/dofetchfeed/limit/10",function(e){e.logged_out&&window.location.reload(),t.find("table").html(e),t.find("i.fa-spinner").addClass("hidden"),$("#unread-feed-count").addClass("hidden").html(0),Utils.initTooltips()})}),Utils.initAjaxPopovers("[data-popover-url]"),Utils.ajaxButtonCallback("[data-async-request]"),$(".with-popover").popover({html:!0}),Utils.modalSubmit(),$("#fh-modal-alerts").modal("show").on("hidden.bs.modal",function(t){$.get("/profile/doconfirmalerts")});new Blazy({loadInvisible:!0,offset:200});Utils.showHints(),Utils.confirmableButtons()});var Pages={Frontpage:{show:function(){var t=0,e=0,i=0,a=$("#tag_cloud").find("li");$.each($.each(a,function(){(i=parseInt($("a",this).data("project-count")))>t&&(t=i),(i<e||0==e)&&(e=i)}),function(){var i=$("a",this).data("project-count");$("a",this).attr("title","Проектов: "+i),$("a",this).attr("class","tag"+Math.ceil((i-e+1)/(t-e+1)*10))})}},Faq:{show:function(){$(".faq input[type=text]").keyup(function(){var t=$(this).val().toLowerCase();t.length>2?($(".faq li").each(function(){-1==($(this).find("h3").text()+$(this).find("p").text()).toLowerCase().indexOf(t)?$(this).hide():$(this).show()}),$(".faq li:visible").length?$(".no-results").hide():$(".no-results").show()):$(".faq li").show()})}},Profile:{list:function(){function t(t){$(t.target).prev(".panel-heading").find("i").toggleClass("fa-plus fa-minus")}Utils.loadLocationData(),$("#city, #country").select2({formatNoMatches:function(t){return"Ничего не найдено"}}),$("#country").on("change",function(){$("#city").prop("disabled",!1)}),Pages.Profile.snippetVotes(),$("[id^='freelancer-']").mouseenter(function(){$(this).find(".btn-group").addClass("in")}).mouseleave(function(){$(this).find(".btn-group").removeClass("in")}),$("#freelancer-quick-search").select2({cache:!0,minimumInputLength:3,ajax:{url:"/profile/doquicksearch",dataType:"json",quietMillis:100,data:function(t){return{q:t.term,page_limit:10}},processResults:function(t,e){return{results:t}}},escapeMarkup:function(t){return t},templateResult:function(t){return t.loading?t.text:'<div><img width="25" height="25" class="img-rounded" src="'+t.avatar+'" /> '+t.id+" ("+t.name+")</div>"},templateSelection:function(t){return t.loading?t.text:t.id},formatNoMatches:function(t){return"Фрилансер на найден"}}).on("select2:select",function(t){$(this).prop("disabled",!0),window.location="/freelancer/"+t.params.data.id+".html?quickjump"}),$("#freelancers_form").submit(function(t){$(this).find("input, select").filter(function(){return!$.trim(this.value).length}).attr("disabled",!0)}),$(".panel-group").on("hidden.bs.collapse",t).on("shown.bs.collapse",t),Utils.photoswipe.init()},augment_flash:function(){$("div[id*=snippet_flash_]").each(function(t){swfobject.embedSWF($(this).attr("rel"),$(this).attr("id"),"240","200","9.0.0","expressInstall.swf",{},{},{styleClass:"marker_snippet"})})},load_snippets:function(t,e){var i=e.parent("li");if(!i.hasClass("active")){var a=$("#snippets-loading");a.addClass("in"),$("#portfolio-items").fadeTo("fast",.1,function(){var n="/showcase/dofetchsnippets/profile/"+t;e.attr("rel")>0&&(n+="/skill/"+e.attr("rel")),$(this).load(n,function(){Pages.Profile.augment_flash(),$("ul.filter li").removeClass("active").find("span").removeClass("inverse").addClass("color-dark-blue"),i.addClass("active").find("span").removeClass("color-dark-blue").addClass("inverse"),Utils.photoswipe.init(),$(this).fadeTo("slow",1),Utils.linkify(),a.removeClass("in")})})}},snippetVotes:function(){$(document).on("click","a.marker-popover-manual",function(t){t.preventDefault(),t.stopPropagation();var e=$(this);$.hasData(this)||($.get("/showcase/dofetchsnippetvoters/snippet/"+e.data("snippetId")+"/direction/"+e.data("voteDirection"),function(t){e.data(t),e.popover({title:"Работа нравится",html:!0,content:t,trigger:"click",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.popover("toggle"),Utils.initTooltips()}),$(document).on("click","html",function(t){e.popover("hide")}))}),Utils.ajaxButtonCallback(".snippet-vote-up",function(){Utils.incrElement($(this).parent().find(".votes-up-count"))}),Utils.ajaxButtonCallback(".snippet-vote-down",function(){Utils.incrElement($(this).parent().find(".votes-down-count"))})},show:function(t,e){$(document.body).scrollspy({target:"#sidebar"}),$("#left-menu").affix({offset:{top:function(){return 190},bottom:function(){return this.bottom=$("footer").outerHeight(!0)+50}}}),Pages.Profile.snippetVotes(),$("ul.filter li a").click(function(e){return e.preventDefault(),Pages.Profile.load_snippets(t,$(this)),!1}),$(".marker-popover").popover(),Pages.Profile.augment_flash(),Utils.initAjaxPopovers("[data-popover-url]"),Utils.photoswipe.init(),$(document).on("click","#show-remaining-portfolio-items",function(t){t.preventDefault(),$(this).fadeOut(200,function(){$(this).closest("table").find("tr").removeClass("hidden")})}),0===location.hash.indexOf("#snippet")&&$("#show-remaining-portfolio-items").click()},registerComplete:function(){Utils.loadLocationData(),$("select[name=country_id], select[name=city_id]").select2(),Utils.pwstrength('[name="password"]')},registerStepOne:function(t){var e=$.fn.intlTelInput.getCountryData();$.each(e,function(t,e){e.name=e.name.replace(/.+\((.+)\)/,"$1")}),Utils.phoneInput(t)},map:function(t,e,i){var a,n=Utils.createMap(t,e,i),o=[],s=L.icon({iconUrl:"/static/images/map-markers/pin-m-circle-stroked+51A351.png",iconRetinaUrl:"/static/images/map-markers/pin-l-circle-stroked+51A351.png",iconSize:[30,70],iconAnchor:[15,10]}),r=L.icon({iconUrl:"/static/images/map-markers/pin-m-circle-stroked+ffb233.png",iconRetinaUrl:"/static/images/map-markers/pin-l-circle-stroked+ffb233.png",iconSize:[30,70],iconAnchor:[15,10]});$.getJSON("/profile/dofetchformap",function(t){for(var n in t){var l,c,d="";if(t[n].total>1){for(var u=0;u<t[n].profiles.length;u++)d+='<div><img src="'+t[n].profiles[u].avatar+'" width="20" height="20"> <a href="/profile/show/'+t[n].profiles[u].login+'.html" target="_blank">'+t[n].profiles[u].name+'</a>&nbsp;<span class="flicks smaller"><i class="fa fa-signal"></i>&nbsp;'+t[n].profiles[u].rating+"</span>";(c=t[n].total-t[n].profiles.length)>0&&(d+=' и еще <a href="/freelancers?lat='+t[n].lat+"&amp;lng="+t[n].lng+'" target="_blank">'+Utils.numeral(c,["пользователь","пользователя","пользователей"])+"</a></div>"),d="<div>"+d+"</div>",(l=new L.Marker([t[n].lat,t[n].lng],{title:Utils.numeral(t[n].total,["пользователь","пользователя","пользователей"]),total:parseInt(t[n].total),icon:s})).bindPopup(d,{maxWidth:"400"})}else d='<div><img src="'+t[n].profiles[0].avatar+'" width="20" height="20"> <a href="/profile/show/'+t[n].profiles[0].login+'.html" target="_blank">'+t[n].profiles[0].name+'</a>&nbsp;<span class="flicks smaller"><i class="fa fa-signal"></i>&nbsp;'+t[n].profiles[0].rating+"</span>"+(t[n].profiles[0].main_skill?"<br>"+t[n].profiles[0].main_skill:"")+(t[n].profiles[0].main_skill_alt?"<br>"+t[n].profiles[0].main_skill_alt:"")+(t[n].profiles[0].snippet?'<br><img src="'+t[n].profiles[0].snippet+'" width="'+t[n].profiles[0].snippet_width+'">':"")+"</div>",(l=new L.Marker([t[n].lat,t[n].lng],{title:t[n].profiles[0].name,total:1,icon:r})).bindPopup(d,{maxWidth:"400"});t[n].lat==e&&t[n].lng==i&&(a=l),o.push(l)}}).done(function(){var t=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(t){for(var e=t.getAllChildMarkers().length,i=t.getAllChildMarkers(),a=0,n=" marker-cluster-",o=0;o<e;o++)a+=i[o].options.total;return n+=a<100?"small":a<500?"medium":"large",new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})}});t.addLayers(o),n.addLayer(t),a&&a.openPopup()})}},Payment:{handle:function(){$(document.body).on("click","#payment-currencies label",function(t){var e=$(this).find("input").data("balance");$(".marker-current-balance").toggleClass("disabled",!(e>0))}),$(document.body).on("click",".marker-payment-button",function(t){t.preventDefault();var e=$("#payment-currencies").find(".active > input").data("currency"),i=$("#refill-amount").val(),a=$(this).attr("href");e&&(a=Utils.updateQueryString("currency",e,a)),i&&(a=Utils.updateQueryString("amount",i,a)),window.location=a})}},Project:{list:function(){$('select[name="tags\\[\\]"]').select2({maximumInputLength:30,maximumSelectionSize:8,width:"100%"});var t=$("input[name=only_my_skills]"),e=$("select[name=skills\\[\\]]");e.select2({maximumSelectionSize:5,width:"100%"}).on("change",function(){$(this).val()&&$(this).val().length>0&&t.removeAttr("checked")}),t.change(function(){$(this).is(":checked")&&e.select2("val","")}),$("#project-filter-form").submit(function(t){$(this).find("input").filter(function(){return!$.trim(this.value).length}).prop("disabled",!0)});var i=$("#projects-html");!Freelancehunt.socket||i.data("is-filter-active")||1!=i.data("page")&&2!=i.data("page")||Freelancehunt.socket.on("projects updated",function(t){if(i.data("page")==t.page){var e=i.find("table").data("last-updated"),a=0;i.animate({opacity:.25},400).html(t.projects_html),i.find("tr").each(function(t,i){$(i).data("published")>=e&&($(i).find("td:first .new-icon").removeClass("hide"),a++)}),i.animate({opacity:1},400).animate({opacity:.25},400).animate({opacity:1},400),Utils.initTooltips(),console.log("Project list updated for page "+t.page+", "+a+" new projects")}}),Visibility.change(function(){Visibility.hidden()&&($("#projects-html").find(".new-icon").addClass("hide"),console.log("Marked projects list as read"))})},arbitrage:function(t){Utils.froala("#arbitrage-form textarea",{heightMin:300,imageUploadParams:{type:"message"}})},show:function(t,e,i){var a=/(#tab-\w+)-*(\d+)*/.exec(location.hash);if(a){var n=$('[href="'+a[1]+'"]');n&&n.tab("show"),a[2]&&$("html, body").animate({scrollTop:$(location.hash).offset().top},250)}$("#report_spam_action").click(function(){return $.post("/project/doreportspam",{project_id:e},function(t){t.success?(Utils.incrElement($("#spam_report_count")),$("#report_budget_action").fadeOut(400),$("#report_spam_action").fadeOut(400),Utils.success(t.message)):Utils.warn("Невозможно отправить жалобу, свяжитесь со службой поддержки")}),!1}),$("#report_budget_action").click(function(){return $.post("/project/doreportbudget",{project_id:e},function(t){t.success?(Utils.incrElement($("#budget_report_count")),$("#report_budget_action").fadeOut(400),$("#report_spam_action").fadeOut(400),Utils.success(t.message)):Utils.warn("Невозможно отправить жалобу, свяжитесь со службой поддержки")}),!1}),$("#add-bid").click(function(t){t.preventDefault(),$(this).addClass("fade").css("cursor","default"),$("#add-bid-form").addClass("in")}),Utils.ajaxButtonCallback(".marker-like-pmb-message",function(){Utils.incrElement(this.find("span"))}),$(".marker-revoke-bid").click(function(t){t.preventDefault();var e=$(this).data("bid-id");$.post("/project/dorevoketbid",{bid_id:e},function(t){if(t.success){var i="#bid-"+e;$(i).fadeOut("slow",function(){Utils.incrElement($("#revoked_bids_count")),Utils.decrElement($("#bids_count")),$("#info-no-revoked-bids").remove(),$(".bid-actions-bar").hide(),Utils.success("Ставка отозвана")})}})}),$(".marker-reject-bid").click(function(t){var e=this;t.preventDefault();var i=$(this).data("bid-id");$.post("/project/dorejectbid",{bid_id:i},function(t){if(t.success){var a="#bid-"+i;$(a).fadeOut("slow",function(){$(e).trigger("mouseleave"),Utils.incrElement($("#rejected_bids_count")),Utils.decrElement($("#bids_count")),$("#info-no-rejected-bids").remove(),$(this).find(".bid-actions-bar").remove(),Utils.success("Ставка отклонена")})}})});var o={date:"asc",rating:null,days:null,amount:null};if($("a.marker-sort-bids").click(function(t){t.preventDefault();var e=$(this).data("sort-by"),i=($(this).next(),$("<img/>").attr("src","/static/images/fugu/arrow-270-medium.png").height(16).width(16).addClass("vertical")),a=$("<img/>").attr("src","/static/images/fugu/arrow-090-medium.png").height(16).width(16).addClass("vertical");$("a.marker-sort-bids img").remove();for(var n in o)n==e?(o[n]="desc"==o[n]?"asc":"desc","desc"==o[n]?i.appendTo($(this)):a.appendTo($(this)),$("#bids").find("li").tsort({order:o[n],data:n}),$("#rejected_bids").find("li").tsort({order:o[n],data:n}),$("#revoked_bids").find("li").tsort({order:o[n],data:n})):o[n]=null}),$("#marker-sort-bids-by-rating").click(function(t){t.preventDefault(),$("#bids").find("li").tsort({order:"desc",data:"rating"})}),$("#bids").find("li").length>1&&t>0&&t==i&&($("#bids").sortable({opacity:.7,placeholder:"ui-drop-target",containment:"parent",cursor:"move"}).on("sortupdate",function(t,e){$("#reorder-bids-alert").hide(),$.ajax({type:"POST",url:"/project/doreorderbids/project/"+$(this).data("project-id"),data:$(this).sortable("serialize"),success:function(t){t.success?Utils.success(t.message):Utils.warn("Ошибка при сохранение порядка ставок")},error:function(t,e,i){Utils.error(i)}})}),$(".marker-send-to-top").click(function(t){t.preventDefault(),$(this).tooltip("hide");var e=$(this).closest("li"),i=$(this).closest("ol");i.prepend(e),$(this).addClass("disabled"),i.find("li:not(:first-child)").find(".marker-send-to-top").removeClass("disabled"),$("#bids").trigger("sortupdate")}),$(".marker-send-to-bottom").click(function(t){t.preventDefault(),$(this).tooltip("hide");var e=$(this).closest("li"),i=$(this).closest("ol");i.append(e),$(this).addClass("disabled"),i.find("li:not(:last-child)").find(".marker-send-to-bottom").removeClass("disabled"),$("#bids").trigger("sortupdate")})),Utils.highlightCode(),Utils.photoswipe.init(),$(".marker-toggle-collapsed").click(function(t){t.preventDefault(),$(this).hide().next("span").addClass("in")}),$("[name=snippet_id]").select2({minimumInputLength:0,templateSelection:function(t){if(t.loading)return t.text;var e=$(t.element).data("thumbnail-url");return"<div>"+(e?'<img width="30" height="20" src="'+e+'" /> ':"")+t.text+"</div>"},templateResult:function(t){if(t.loading)return t.text;var e=$(t.element).data("thumbnail-url");return"<div>"+(e?'<img width="50" height="40" class="pull-left" style="margin-right: 4px" src="'+e+'" /> ':"")+t.text+'<br><span class="text-muted smallest">'+$(t.element).data("skill-name")+"</span></div>"},escapeMarkup:function(t){return t}}),Pages.Profile.snippetVotes(),$("#subscribe-to-forum-updates").click(function(){$("#subscribe-to-forum-updates:checked").val()?$.post("/project/messagenotifications/set/yes/id/"+e,{},function(){Utils.success("Вы подписались на уведомления о новых сообщениях")}):$.post("/project/messagenotifications/set/no/id/"+e,{},function(){Utils.success("Вы более не будете получать уведомления о сообщениях в этом проекте")})}),"UA"!==Freelancehunt.profile.ipCountryCode&&"UA"!==Freelancehunt.profile.countryCode){var s=$("input[name=amount]"),r=$("select[name=currency_code]");$("input[name=amount], select[name=currency_code]").on("change input",function(){s.val()>0&&r.next(".help-block").html("Примерно $"+parseFloat(s.val()*s.data(r.val().toLowerCase()+"-usd")).toFixed(1)+" или "+parseFloat(s.val()*s.data(r.val().toLowerCase()+"-eur")).toFixed(1)+"€")})}$(".chat-box li").mouseenter(function(){$(this).find("[data-complaint-link]").addClass("in")}).mouseleave(function(){$(this).find("[data-complaint-link]").removeClass("in")})},reply:function(){Utils.froala("textarea[name=body]",{imageUploadParams:{type:"projectboard"}}).on("froalaEditor.contentChanged",function(t,e){$('[name="add-message"]').attr("disabled",e.core.isEmpty())})},reloadPmb:function(t){$("#tab-discuss").addClass("fade").removeClass("in").load("/discussion/dofetch/project/"+t,null,function(){$(this).addClass("in")})},distribution:function(t,e){Chart.defaults.global.responsive=!0,Chart.defaults.global.defaultFontFamily='"PT Sans", "Helvetica Neue", Arial, sans-serif';var i={labels:t,datasets:[{label:"Количество ставок",backgroundColor:"rgba(73,146,73,0.5)",pointBackgroundColor:Freelancehunt.colors.green,borderColor:Freelancehunt.colors.green,borderWidth:1,data:e}]},a=$("#distribution-chart").get(0).getContext("2d");new Chart(a,{type:"bar",data:i,options:{scales:{xAxes:[{barPercentage:.95,categoryPercentage:.95}],yAxes:[{ticks:{stepSize:1,beginAtZero:!0}}]},legend:{display:!1}}})},complete:function(){var t=$("[data-slider]");t.bind("slider:changed",function(t,e){var i=$(this).siblings("div.selected-grade").html(this.value+" из 10").removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")});this.value>8?i.addClass("color-green"):this.value>3?i.addClass("color-yellow"):i.addClass("color-red")}),t.bind("slider:ready",function(){$('<div class="selected-grade pull-right badge bigger"></div>').insertAfter($(this)),$(this).trigger("slider:changed")})},categoryfeedback:function(){$("select[name=skills\\[\\]]").select2({width:"100%",maximumSelectionLength:3,language:{maximumSelected:function(t){return"Вы можете выбрать не более "+t.maximum+" категорий для размещения проекта"}}})},addOrUpdate:function(t,e,i){$("input.date").datepicker({weekStart:1,format:"dd/mm/yyyy",language:"ru",autoclose:!0,todayHighlight:!0,startDate:new Date});var a;(a=function(){var t=$("[name=safe_type]:checked").val(),e=$("[id|=payment_types]").parents(".form-group"),i=$("[name=is_job]").parents(".form-group"),a=$("[name=is_only_for_verified]").parents(".form-group"),n=$("[name=country_id]").parents(".form-group");"employer_cashless"===t?(e.hide(),i.hide(),n.hide(),a.hide()):t?(e.hide(),i.show(),n.show(),a.show()):(e.show(),n.show(),i.show(),a.show())})(),$("input[name=safe_type]").click(function(){a()}),Utils.select2tags($('select[name="tags[]"]')),$("select[name=country_id], select[name=city_id]").select2(),$("select[name=skills\\[\\]]").select2({maximumSelectionLength:3,language:{maximumSelected:function(t){return"Вы можете выбрать не более "+t.maximum+" категорий для размещения проекта"}}}),Utils.froala("textarea[name=description]",{heightMin:250,imageUploadParams:{type:"project"}}),Utils.phoneInput(t);var n;if(n=e?{request:{endpoint:"/upload/doattach/for/project",params:{id:e}},session:{endpoint:"/upload/doattachmentlist/for/project/id/"+e},deleteFile:{enabled:!0,endpoint:"/upload/dodeleteattachment/for/project/attachment"}}:{request:{endpoint:"/upload/doattach/for/project",params:{random_token:$("form input[name=random_token]").val()}},session:{endpoint:"/upload/doattachmentlist/for/project/token/"+i},deleteFile:{enabled:!0,endpoint:"/upload/dodeleteattachment/for/project/attachment"+i}},Utils.uploader($("#fine-uploader"),n),"UA"!==Freelancehunt.profile.ipCountryCode&&"UA"!==Freelancehunt.profile.countryCode){var o=$("input[name=budget_amount]"),s=$("select[name=budget_currency_code]");$("input[name=budget_amount], select[name=budget_currency_code]").on("change input",function(){o.val()>0&&s.next(".help-block").html("Примерно $"+parseFloat(o.val()*o.data(s.val().toLowerCase()+"-usd")).toFixed(1)+" или "+parseFloat(o.val()*o.data(s.val().toLowerCase()+"-eur")).toFixed(1)+"€")})}var r=$("#modal-video");$("#fh-video-modal").on("shown.bs.modal",function(){r.attr("src",r.data("src"))}).on("hide.bs.modal",function(){r.attr("src","")}),e||mixpanel.track("View add project page")},modalDialogs:function(){$("input.date").datepicker({weekStart:1,format:"dd/mm/yyyy",language:"ru",startDate:new Date,autoclose:!0,todayHighlight:!0,endDate:"+21d"}),$("[id^=close-project-dialog]").find("form").submit(function(t){t.preventDefault(),$.post("/project/doupdate",{status_id:22,project_id:$(this).data("project-id")},function(t){t.success?location.reload():Utils.error("Ошибка при закрытии проекта")})}),$("[id^=prolong-project-dialog]").find("form").submit(function(t){t.preventDefault();var e=$("input",this).val();return e&&$.post("/project/doupdate",{expire_time:e,project_id:$(this).data("project-id")},function(t){t.success?location.reload():Utils.error("Ошибка при продлении проекта")}),!1}),$("[id^=reopen-project-dialog]").find("form").submit(function(t){t.preventDefault();var e=$("input",this).val();return e&&$.post("/project/doupdate",{expire_time:e,status_id:11,project_id:$(this).data("project-id")},function(t){t.success?location.reload():Utils.error("Ошибка при открытии проекта")}),!1})},statistics:function(t,e){$.getScript("//code.highcharts.com/highcharts.js",function(i,a,n){Highcharts.setOptions({global:{useUTC:!1},lang:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]}});var o={xAxis:{type:"datetime"},chart:{renderTo:e,type:"column"},title:{text:"Просмотры по часам",x:-20},yAxis:{min:0,title:{text:"Просмотры"}},series:[{data:t,showInLegend:!1,color:"#ffb31b"}],tooltip:{formatter:function(){return Highcharts.dateFormat("%H:00-%H:59",new Date(this.x))+": "+Utils.numeral(this.y,["просмотр","просмотра","просмотров"])}}};new Highcharts.Chart(o)})}},Mailbox:{list:function(){var t=function(){var t=$("#button-delete-messages");$(".delete-thread-id:checked").length>0?t.removeClass("disabled"):t.addClass("disabled")};$(".delete-thread-id").click(function(){t()}),$("#select-all-threads").click(function(){$(".delete-thread-id").prop("checked",$(this).is(":checked")),t()}),$("#button-delete-messages").click(function(t){t.preventDefault();var e={"thread_ids[]":[]};$(".delete-thread-id:checked").each(function(){e["thread_ids[]"].push($(this).val())}),$.post("/mailbox/dodelete",e,function(t){t.success?(Utils.success(t.message),$(".delete-thread-id:checked").parents("tr").fadeOut("slow",function(){$(".last-page-active").length&&e.length===$(".delete-thread-id").length?window.location.href="/mailbox/list":window.location.reload()})):Utils.error(t.message)})}),$("#thread-filter-form").change(function(){$(this).find("select").val()?$(this).submit():window.location=window.location.pathname})},read:function(){function t(){Freelancehunt.socket&&Freelancehunt.socket.emit("message read receipt",{profile_id:Freelancehunt.profile.id,thread_id:Freelancehunt.profile.threadId,company_id:Freelancehunt.profile.companyId}),console.debug("Sending back thread read receipt")}function e(t){i=t,Freelancehunt.socket&&Freelancehunt.socket.emit("message typing notification",{thread_id:Freelancehunt.profile.threadId,is_typing:t}),console.log("Sent typing="+t+" notification")}var i=!1,a=void 0,n=0,o=$("#reply-form");Freelancehunt.socket&&Freelancehunt.socket.on("connect",function(){Visibility.change(function(e,i){Visibility.hidden()?(console.log("Leaving the page"),$("img.marker-new-message").addClass("marker-new-message-to-be-removed")):(console.log("Coming back to the page"),t(),$("img.marker-new-message-to-be-removed").remove(),$.faviconNotify("/favicon.ico"))}),console.log("Thread live updates enabled")}).on("new message",function(e){e.message_html?e.from_profile_id!=Freelancehunt.profile.id&&(s(e.message_html),$("#typing-notification-indicator").removeClass("in"),Visibility.hidden()?(console.debug("Message received, but nobody reading the page"),$.faviconNotify("/favicon.ico",++n,"br","green","#efefef")):(console.debug("New message received"),Utils.playNotification("new_thread_pm"),t())):Utils.warn("Ошибка: получено пустое сообщение")}).on("typing notification",function(t){t.from_profile_id!=Freelancehunt.profile.id&&(t.is_typing?$("#typing-notification-indicator").addClass("in"):$("#typing-notification-indicator").removeClass("in"),console.log("Received typing="+t.is_typing+" notification"))}),Utils.froala("#reply-form textarea",{imageUploadParams:{type:"message"}}).on("froalaEditor.keydown",function(t,n,o){i?(clearTimeout(a),a=setTimeout(function(){e(!1)},5e3)):e(!0)});var s=function(t){var e=$(t),i=$("ul.chat-box"),a=i.parent("div");Utils.linkify(e),Utils.timeago(e),!a.data("is-height-adjusted")&&a.height()>450&&a.data("is-height-adjusted",!0).height(Math.max(i.height(),a.height())).addClass("chat-box-overflow"),i.append(e.fadeIn(400)),a.scrollTop(Math.max(a[0].scrollHeight,a[0].clientHeight)-a[0].clientHeight),$("#total-messages-in-thread").text(parseInt($("#total-messages-in-thread").text())+1)};window.location.hash&&"last-message"===window.location.hash.slice(1)&&o.find("textarea").froalaEditor("events.focus"),o.submit(function(t){t.preventDefault(),clearTimeout(a),a=setTimeout(function(){e(!1)},0),o.css("opacity",.5),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serializeArray(),success:function(t,e,i){if(t.failed)return Utils.warn(t.message),o.css("opacity",1),void Ladda.stopAll();o.css("opacity",1),o.find("textarea").froalaEditor("html.set",""),$("#file-uploader").fineUploader("reset"),s(t.payload),Ladda.stopAll()},error:function(t,e,i){Utils.warn(i),o.css("opacity",1),Ladda.stopAll()}})}),$(".reply-form-trigger").click(function(t){t.preventDefault(),o.find("[name=to_profile_id]").val($(this).parents("li").data("profile-id")),$("html, body").animate({scrollTop:o.offset().top},"fast"),o.find("textarea").froalaEditor("events.focus")}),$(".reply-form-with-quote-trigger").click(function(t){t.preventDefault();var e,i=$(this);window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e||(e=i.parents("li").find(".linkify-marker").html()),o.find("textarea").froalaEditor("html.set","<blockquote>"+e+"</blockquote>"),o.find("textarea").froalaEditor("events.focus"),o.find("[name=to_profile_id]").val($(this).parents("li").data("profile-id")),$("html, body").animate({scrollTop:o.offset().top},"fast")});$("#file-uploader").fineUploader({autoUpload:!0,text:{defaultResponseError:"Системная ошибка при загрузке файла."},messages:{emptyError:"{file} имеет нулевой размер",sizeError:"{file} слишком большой, максимальный размер файла {sizeLimit}",tooManyItemsError:"Вы можете приложить к сообщению не более {itemLimit} файлов (приложено {netItems})",typeError:"Запрещенный тип файла {file}, разрешенные расширения: {extensions}"},validation:{itemLimit:5,allowedExtensions:["gif","jpeg","jpg","png","pdf","psd","gz","7z","docx","doc","zip","rar","rtf","odt","ott","sxw","ods","ai","gzip","swf","cdr","mp3","xlsx","xls","txt","pptx","ppt","css","c","h","js","ico","htm","html","csv"],sizeLimit:Freelancehunt.profile&&Freelancehunt.profile.hasPlus?25e6:6e6},deleteFile:{enabled:!0,endpoint:"/upload/dodeleteattachment/for/message/attachment"},request:{endpoint:"/upload/domessageattach"},template:"file-uploader-template-bootstrap",classes:{success:"alert alert-success",fail:"alert alert-error"},showMessage:function(t){Utils.warn(t)}}).on("error",function(t,e,i,a,n){Utils.warn(i+": "+a)}).on("complete",function(t,e,i,a){a.success&&$("<option>").attr("value",a.attach_id).attr("selected","selected").appendTo("select[name=attach_id\\[\\]]")});Utils.highlightCode();var r=$("#arrow-box-expand-some-trigger"),l=function(){r.closest("li").nextAll("li.collapse").slice(-r.data("count")).removeClass("collapse"),1===$(".chat-box > li.collapse").length&&c.parent().removeClass("in"),$("html, body").animate({scrollTop:$(".chat-box > li.collapse").prev().offset().top-15},400)};r.click(function(t){t.preventDefault(),l()});var c=$("#arrow-box-expand-all-trigger"),d=function(t){$(".chat-box > li").addClass("in"),c.parent().removeClass("in"),t?$("html, body").animate({scrollTop:t.offset().top-15},400):$("html, body").animate({scrollTop:$(".chat-box > li.collapse").last().offset().top-15},400)};c.click(function(t){t.preventDefault(),d()}),0===location.hash.indexOf("#message-")&&d($(location.hash));var u=$("#confirm-conditions").click(function(t){return $("#agreement-confirmed").length?(t.preventDefault(),Utils.warn("Вы должны принять условия договора-оферты"),!1):$("#spec-text").length&&0===$("#spec-text").text().trim().length?(t.preventDefault(),Utils.warn("Пожалуйста, уточните техническое задание перед утверждением условий проекта"),!1):void 0});$("#agreement-confirmed").click(function(){this.checked?u.css("cursor","pointer").unbind("click"):u.css("cursor","default").click(function(t){return t.preventDefault(),!1})}),$(".toggle-form-new-conditions").click(function(t){var e=$("#form-new-conditions");t.preventDefault(),e.hasClass("in")?e.removeClass("in"):e.addClass("in")}),$("#show-attachments-index-trigger").click(function(t){t.preventDefault(),$("#attachments-index").slideToggle().removeClass("hidden"),$(".chat-box>li").addClass("in"),$("#arrow-box-expand-trigger").find(">a").parent().removeClass("in")}),Utils.photoswipe.init(),Utils.timeago(),Utils.wayforpay(),$("#edit-spec-action").length&&($("#edit-spec-action").click(function(t){t.stopPropagation(),$("#spec-text").editable("toggle"),t.preventDefault()}),$("#spec-text").editable({url:"/project/doupdatespec",inputclass:"form-control ",showbuttons:"bottom",mode:"inline",rows:20,toggle:"manual",emptytext:"",validate:function(t){return""==$.trim(t)?"Техническое задание обязательно для заключения договора":$.trim(t).length<500?"Длина технического задания на проект не может быть менее 500 символов":void 0},success:function(t){t.error?Utils.error(t.error):Utils.success("Техническое задание успешно обновлено"),t.message&&t.message.reload_page&&location.reload(!0)}})),$("input.star").click(function(t){var e=$(this).data("grade"),i=$(this).data("thread-id");$.post("/mailbox/ratesupport",{thread:i,grade:e},function(){5==e?Utils.success("Приятной работы!"):Utils.success("Спасибо, ваше мнение важно для нас")}).fail(function(){Utils.error("Ошибка при сохранении рейтинга")})}),$("[data-call-profile-id]").popover()},send:function(){Utils.froala("textarea[name=message]",{imageUploadParams:{type:"message"}})}},My:{dashboard:function(){Utils.registerPushNotifications(0),$(".what-is-flicks").popover({html:!0,placement:"bottom",trigger:"manual",animate:!0,template:'<div style="min-width: 250px" class="popover" onmouseover="$(this).mouseleave(function() {$(this).hide(); });"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}).click(function(t){t.preventDefault()}).mouseenter(function(){$(this).popover("show")}).on("shown.bs.popover",function(){$(this).data("bs.popover").$tip.on("mouseenter",function(){$(this).addClass("hover")}).on("mouseleave",function(){$(this).removeClass("hover")})}).mouseleave(function(){var t=this;setTimeout(function(){$(t).data("bs.popover").tip().hasClass("hover")||$(t).popover("hide")},500)}),$("#activity-feed").load("/my/dofetchfeed/news/yes",function(){Utils.photoswipe.init(),Utils.initTooltips()}),$(document).on("popup_opened.social-likes",function(t,e){$.get("/my/dotrackshare",{service:e},function(t){Utils.success("Спасибо за поддержку!")})})},personal:function(){"mail"===$("[name=legal_documents_delivery]:checked").val()&&$("[name=papka24_emails]").parents(".form-group").hide(),Utils.loadLocationData(),$("input.date").datepicker({weekStart:1,format:"dd/mm/yyyy",language:"ru",autoclose:!0,todayHighlight:!0,startView:2,startDate:"-75y",endDate:"-15y"}),$("select[name=country_id], select[name=city_id]").select2(),Utils.select2tags($('select[name="tags[]"]')),$("textarea[name=signature]").keydown(function(t){if(13==t.keyCode&&$(this).val().split("\n").length>=$(this).attr("rows"))return!1}).on("blur",function(){var t=$(this).val().split("\n");t.length>=$(this).attr("rows")&&$(this).val(t[0]+"\n"+t[1])})},paymentdetails:function(){$("[name=card_number]").validateCreditCard(function(t){t.valid&&t.card_type?($(this).closest(".form-group").removeClass("has-error"),$(this).siblings(".help-block").find("img").attr("src","/static/images/payments/"+t.card_type.name+".png")):this.val()&&($(this).closest(".form-group").addClass("has-error"),$(this).siblings(".help-block").find("img").attr("src","/static/images/payments/credit_card_generic.png"))}),$("[name=card_number_alt]").validateCreditCard(function(t){t.valid&&t.card_type?($(this).closest(".form-group").removeClass("has-error"),$(this).siblings(".help-block").find("img").attr("src","/static/images/payments/"+t.card_type.name+".png")):this.val()&&($(this).closest(".form-group").addClass("has-error"),$(this).siblings(".help-block").find("img").attr("src","/static/images/payments/credit_card_generic.png"))})},editSnippet:function(){$("select[name=skill_id]").select2({placeholder:"Выберите категорию работы",width:"100%"}),$("[name=is_take_screenshot]").change(function(){$(this).is(":checked")?$(".fileinput").fileinput("clear").closest(".form-group").hide():$("[name=snippet_file]").closest(".form-group").show()}),$("textarea[name=snippet_comment]").atwho({at:"#",data:"/profile/dofetchtags/only/singlewords",limit:7})},portfolio:function(){$("select[name=skill_id]").select2({placeholder:"Выберите категорию работы",width:"resolve"});var t=function(){var t=e.find("li").length-1;e.find("li").each(function(e,i){0==e?($("a.move-snippet-bottom-marker",i).addClass("in"),$("a.move-snippet-top-marker",i).removeClass("in")):t==e?($("a.move-snippet-bottom-marker",i).removeClass("in"),$("a.move-snippet-top-marker",i).addClass("in")):($("a.move-snippet-bottom-marker",i).addClass("in"),$("a.move-snippet-top-marker",i).addClass("in"))}),$.ajax({type:"POST",url:"/my/portfolio/reorder",data:e.sortable("serialize"),context:this,success:function(t){t.success?($(this).removeClass("in"),Utils.success(t.message)):Utils.error("Ошибка при сохранении порядка работа")},error:function(t,e,i){Utils.error(i)}})},e=$("ul.portfolio-snippets");e.length&&e.sortable({opacity:.75,placeholder:"ui-drop-target"}).on("sortupdate",function(e,i){t()}).disableSelection(),$("a.move-snippet-top-marker").click(function(){return $("#snippet_"+$(this).attr("rel")).fadeOut("normal",function(){$(this).prependTo(e).fadeIn("normal"),t()}),!1}),$("a.move-snippet-bottom-marker").click(function(){return $("#snippet_"+$(this).attr("rel")).fadeOut("normal",function(){$(this).appendTo(e).fadeIn("normal"),t()}),!1}),Utils.ajaxButtonCallback(".marker-doremovesnippet",function(){this.parents("li").delay(500).slideToggle("slow")}),Pages.Profile.augment_flash(),$("[name=is_take_screenshot]").change(function(){$(this).is(":checked")?$(".fileinput").fileinput("clear").closest(".form-group").hide():$("[name=snippet_file]").closest(".form-group").show()}),Utils.photoswipe.init(),$("textarea[name=snippet_comment]").atwho({at:"#",data:"/profile/dofetchtags/only/singlewords",limit:7}),new Clipboard("[data-clipboard-text]").on("success",function(t){$(t.trigger).find("img").tooltip("destroy"),Utils.success("Ссылка скопирована")})},projects:function(){$("#group").change(function(){$(this).closest("form").submit()})},contests:function(){$("#group").change(function(){$(this).closest("form").submit()})},bids:function(){$("#status").change(function(){$(this).closest("form").submit()})},applications:function(){$("#status").change(function(){$(this).closest("form").submit()}),Utils.photoswipe.init()},buttons:function(){var t=new Clipboard("#copy-button"),e=$("#modal-button-code");$("a.toggle-code-modal").click(function(t){t.preventDefault();var i=e.find("textarea");i.val(i.val().replace(/<img .+?>/,$(this).html())),$("#copy-button").html("Копировать в буфер обмена"),e.modal("toggle")}),t.on("success",function(t){Utils.success("Код скопирован в буфер обмена"),e.modal("hide")})},bonus:function(){var t=new Clipboard("#copy-button"),e=$("#modal-button-code");$("a.toggle-code-modal").click(function(t){t.preventDefault();var i=e.find("textarea");i.val(i.val().replace(/<img .+?>/,$(this).html())),$("#copy-button").html("Копировать в буфер обмена"),e.modal("toggle")}),t.on("success",function(t){Utils.success("Код скопирован в буфер обмена"),e.modal("hide"),mixpanel.track("Bonus banner copied",{"Bonus banner url":$(t.text).find("img").attr("src")})}),$(".filter>li>a").click(function(t){t.preventDefault(),$(".filter>li").removeClass("active"),$(this).parent().addClass("active");var e=$("#all-banners"),i=$(this).attr("rel");e.fadeOut(200,function(){i?(e.find("div").hide(),e.find("[id="+i+"]").show()):e.find("div").show(),e.fadeIn(200)})})},team:function(){Utils.ajaxButtonCallback("#doremovefromteam",function(){this.parents("tr").fadeOut()}),$(".doremovefromteam-marker").click(function(t){t.preventDefault(),$.ajax({url:this.href,cache:!1,context:this,success:function(t){t.success&&$(this).parents("tr").fadeOut()}})}),$("table.table-filterable").filterTable({inputSelector:"#team-filter",callback:function(t,e){e.find("th>.label").text(e.find("tr").filter(":visible").length-1)}})},reviews:function(){},skills:function(){$("[for^=skills] a").editable({emptytext:"не указана",validate:function(t){return!/^[1-9][0-9]*$/.test(t.rate)&&t.rate?"Пожалуйста, укажите корректную сумму":t.rate>1e5?"Сумма слишком велика":t.rate_unit_id?void 0:"Пожалуйста, укажите тип работы"}})},changePassword:function(){Utils.pwstrength('[name="password"]')},cv:function(){Utils.froala("textarea[name=cv]",{imageUploadParams:{type:"cv"},heightMin:300})},api:function(){hljs.initHighlightingOnLoad()},location:function(t,e){var i=Utils.createMap(!1,t,e);t&&e&&L.marker([t,e]).addTo(i),i.on("locationfound",function(t){$("#location-not-provided-alert").fadeOut()})},finance:function(t){if(t.length){for(var e=[],i=[],a=0;a<t.length;a++)e.push(t[a].period),i.push(t[a].total_amount);Chart.defaults.global.responsive=!0,Chart.defaults.global.defaultFontFamily='"PT Sans", "Helvetica Neue", Arial, sans-serif';var n={labels:e,datasets:[{label:"Заработано в месяц",backgroundColor:"rgba(73,146,73,0.5)",pointBackgroundColor:Freelancehunt.colors.green,borderColor:Freelancehunt.colors.green,borderWidth:1,data:i}]},o=$("#earnings-chart").get(0).getContext("2d");new Chart(o,{type:"bar",data:n,options:{tooltips:{enabled:!0,callbacks:{label:function(t,e){return t.yLabel+Freelancehunt.profile.currencySymbol}}},legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}},views:function(t,e,i,a){var n;Chart.defaults.global.responsive=!0,Chart.defaults.global.defaultFontFamily='"PT Sans", "Helvetica Neue", Arial, sans-serif';var o={labels:t,datasets:[{label:"Просмотры",backgroundColor:"rgba(255,179,27,0.2)",pointBackgroundColor:Freelancehunt.colors.orange,borderColor:Freelancehunt.colors.orange,data:e,borderWidth:1},{label:"Уникальные пользователи",backgroundColor:"rgba(73,146,73,0.2)",pointBackgroundColor:Freelancehunt.colors.green,borderColor:Freelancehunt.colors.green,data:i,borderWidth:1}]},s=$("#viewers-chart").get(0).getContext("2d"),r=new Chart(s,{type:"line",data:o,options:{}});$("#viewers-chart").click(function(t){var e=$("#viewers-for-day"),i=r.getElementAtEvent(t);i.length&&(n="/my/views/for/"+r.data.labels[i[0]._index],a&&(n+="/profile/"+a),e.fadeTo(150,0,function(){e.load(n,{},function(){e.fadeTo(150,1)})}))});var l=new Date;n="/my/views/for/"+l.getUTCFullYear()+"/"+l.getMonth()+"/"+l.getDay(),a&&(n+="/profile/"+a),$("#viewers-for-day").load(n)},preferences:function(t){Utils.registerPushNotifications(t)},legalstatus:function(){"no"===$("[name=power_of_attorney]:checked").val()&&$("[name=s3_legal_power_of_attorney_document]").parents(".form-group").hide(),mixpanel.track("View Legal status page")}},Showcase:{list:function(){Pages.Profile.snippetVotes(),Utils.photoswipe.init()}},Statistics:{index:function(){function t(){(new Date).getTime()-e>=3e5?window.location.reload(!0):setTimeout(t,1e4)}var e=(new Date).getTime();$(document.body).bind("mousemove keypress",function(t){e=(new Date).getTime()}),setTimeout(t,1e4)}},Contest:{addOrUpdate:function(t,e,i){Utils.froala("textarea[name=description]",{imageUploadParams:{type:"contest"}}),Utils.phoneInput(t),Utils.select2tags($('select[name="tags[]"]'));var a;a=e?{request:{endpoint:"/upload/doattach/for/contest",params:{id:e}},session:{endpoint:"/upload/doattachmentlist/for/contest/id/"+e},deleteFile:{enabled:!0,endpoint:"/upload/dodeleteattachment/for/contest/attachment"}}:{request:{endpoint:"/upload/doattach/for/contest",params:{random_token:$("form input[name=random_token]").val()}},session:{endpoint:"/upload/doattachmentlist/for/contest/token/"+i},deleteFile:{enabled:!0,endpoint:"/upload/dodeleteattachment/for/contest/attachment/"+i}},Utils.uploader($("#fine-uploader"),a),$("[data-slider]").bind("slider:changed",function(t,e){$("span.selected-duration").html(this.value+" дней").removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")})}),$("[data-budget-multiplier]").bind("click",function(t){t.preventDefault();var e=$("[name=budget_currency_code]").val().toLowerCase(),i=$("[name=budget_amount]").data("min-budget-"+e),a=$(this).data("budget-multiplier"),n=10*Math.round(i*a/10);$("[name=budget_amount]").val(n)}),e||mixpanel.track("View add contest page")},list:function(){},show:function(t,e,i){var a=/(#tab-\w+)-*(\d+)*/.exec(location.hash);if(a){var n=$('[href="'+a[1]+'"]');n&&n.tab("show"),a[2]&&$("html, body").animate({scrollTop:$(location.hash).offset().top},250)}$("#add-application-btn").click(function(t){t.preventDefault(),$(this).addClass("fade"),$("#add-application-form").toggleClass("in")}),Utils.photoswipe.init();var o={date:null,rating:null,grade:"desc"},s=$("<img/>").attr("src","/static/images/fugu/arrow-270-medium.png").height(16).width(16).addClass("vertical"),r=$("<img/>").attr("src","/static/images/fugu/arrow-090-medium.png").height(16).width(16).addClass("vertical"),l=function(t){for(var e in o)if($("a.marker-sort-bids").filter(function(){return e==t}).css("paddingRight","3px").find("img").remove(),e==t){var i=$("[data-sort-by='"+t+"']");"desc"==o[e]?s.appendTo(i.css("paddingRight",0)):r.appendTo(i.css("paddingRight",0)),$("#applications").find("li").tsort({order:o[e],data:e})}else o[e]=null};$("a.marker-sort-bids").click(function(t){t.preventDefault();var e=$(this).data("sort-by");o[e]="desc"==o[e]?"asc":"desc",l(e)}),Utils.ajaxButtonCallback(".marker-like-pmb-message",function(){Utils.incrElement(this.find("span"))}),$("input.star").click(function(t){var e=$(this);$.post("/contest/dorate",{application:e.data("application"),grade:e.data("grade")},function(){e.closest("li").attr("data-grade",e.data("grade")),$("#rate-prompt-"+e.data("application-id")).fadeOut(),o.grade&&l("grade")}).fail(function(){Utils.error("Ошибка изменения рейтинга")})}),$(".marker-reject-application").click(function(t){var e=this;t.preventDefault();var i=$(this).data("application-id");$.post("/contest/dorejectapplication/",{application_id:i},function(t){if(t.success){var a="#application-"+i;$(a).fadeOut("slow",function(){$(e).trigger("mouseleave"),Utils.incrElement($("#rejected-count")),Utils.decrElement($("#applications-count")),Utils.success("Конкурсная работа отклонена")})}})}),$(".marker-revoke-application").click(function(t){t.preventDefault();var e=$(this).data("application-id");$.post("/contest/dorevokeapplication",{application_id:e},function(t){if(t.success){var i="#application-"+e;$(i).fadeOut("slow",function(){$(".application-actions-bar").hide(),Utils.success("Работа отозвана")})}})}),Utils.ajaxButtonCallback(".application-vote-up",function(){Utils.incrElement($(this).parent().find(".votes-up-count"))}),$("#subscribe-to-forum-updates").click(function(){$("#subscribe-to-forum-updates:checked").val()?$.post("/contest/messagenotifications/set/yes/id/"+i,{},function(){Utils.success("Вы подписались на уведомления о новых сообщениях")}):$.post("/contest/messagenotifications/set/no/id/"+i,{},function(){Utils.success("Вы более не будете получать уведомления о сообщениях в этом конкурсе")})}),$(".chat-box li").mouseenter(function(){$(this).find("[data-complaint-link]").addClass("in")}).mouseleave(function(){$(this).find("[data-complaint-link]").removeClass("in")})},reloadPmb:function(t){$("#tab-discuss").addClass("fade").removeClass("in").load("/discussion/dofetch/contest/"+t,null,function(){$(this).addClass("in")})},reply:function(){Utils.froala("textarea[name=body]",{imageUploadParams:{type:"projectboard"}}).on("froalaEditor.contentChanged",function(t,e){$('[name="add-message"]').attr("disabled",e.core.isEmpty())})},publishUpdate:function(){Utils.froala("textarea[name=update]",{minHeight:250,imageUploadParams:{type:"contest"}})}},Service:{plus:function(){$(".marker-change-currency").click(function(t){t.preventDefault(),$(".marker-symbol").html($(this).data("symbol")),$(".marker-price-1").html($(this).data("price-one")),$(".marker-price-3").html($(this).data("price-three")),$(".marker-price-6").html($(this).data("price-six")),$(".marker-price-6-no-discount").html(6*$(this).data("price-one")),$(".marker-price-12").html($(this).data("price-twelve")),$(".marker-price-12-no-discount").html(12*$(this).data("price-one")),$("button[type=submit]").data("currency",$(this).data("currency"))}),$("#fh-modal-lg").on("show.bs.modal",function(t){var e=$(this),i=$(t.relatedTarget);$.get("/payment/handle/for/profile/type/plus/months/"+i.data("months")+"?currency="+i.data("currency"),function(t){e.find(".modal-content").html(t)})}),$("#bid-preview").click(function(t){t.preventDefault();var e=[{src:"/static/images/plus/bid_look.png",w:1457,h:454}];new PhotoSwipe(document.querySelectorAll(".pswp")[0],PhotoSwipeUI_Default,e).init()}),mixpanel.track("View Plus promo page")},contests:function(){var t=$("#contest-video");$("#fh-video-modal").on("shown.bs.modal",function(){t.attr("src",t.data("src"))}).on("hide.bs.modal",function(){t.attr("src","")})}},Support:{index:function(){$("#kb-form").submit(function(t){t.preventDefault();var e=$(this).find("button i"),i=$(".faq input[type=text]").val();i?(e.removeClass("fa-search").addClass("fa-spinner fa-spin"),$("#kb-results").load("/support/dosearch?q="+encodeURIComponent(i),function(){e.addClass("fa-search").removeClass("fa-spinner fa-spin")})):Utils.warn("Введите текст запроса")}).find("input[type=text]").focus()}}},profileRecaptchaCallback=function(t){$.post("/profile/dogetcontactdetailswithcaptcha",{profile_id:$(".g-recaptcha").data("profile-id"),g_recaptcha_response:t},function(t){t.success?($("#contact-info-placeholder").fadeOut("slow",function(){$(this).html(t.message).fadeIn("slow"),grecaptcha.reset()}),$("#contact-details-disclaimer").modal("toggle")):grecaptcha.reset()})};Freelancehunt.colors={orange:"#ffb31b",lightOrange:"#ffb31b",green:"#499249",lightGreen:"#77BA87",red:"#ff3333",lightRed:"#ff3838",blue:"#0077B3",lightBlue:"#00a8e2",pink:"#EF767A",lightPink:"#F6B4B6"};